window.onload=function(){generarEnlaces()};var types={doc:[".pdf"],video:[".mp4",".flv",".webm",".ogg"],audio:[".mp3",".wav"],image:[".jpeg",".jpg",".gif",".png",".svg",".bmp"]};var mimeTypes={mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",mp3:"audio/mpeg",wav:"audio/wav"};function generarEnlaces(){if(document.getElementById("archivos")){var b=document.getElementById("archivos");var f=b.getElementsByTagName("div");var a=b.getElementsByTagName("a");var h,k,e,d;var c=[],g=[];for(e=0;e<a.length;e++){if((window.screen.availWidth<768)&&(/.pdf/.test(a[e].href)||/.flv/.test(a[e].href))){continue}for(d=0;d<types.doc.length;d++){k=new RegExp(types.doc[d]);if(k.test(a[e].href)){if(e===0){verContenido(a[e].href,true)}c[e]=document.createElement("button");c[e].setAttribute("onclick",'window.location.href="'+a[e].href+'"');c[e].setAttribute("class","btn btn-default btn-xs");g[e]=document.createElement("span");g[e].setAttribute("class","glyphicon glyphicon-download-alt");g[e].setAttribute("aria-hidden","true");c[e].appendChild(g[e])}}for(d=0;d<types.video.length;d++){k=new RegExp(types.video[d]);if(k.test(a[e].href)){if(e===0){verContenido(a[e].href,true)}c[e]=document.createElement("button");c[e].setAttribute("onclick",'window.location.href="'+a[e].href+'"');c[e].setAttribute("class","btn btn-default btn-xs");g[e]=document.createElement("span");g[e].setAttribute("class","glyphicon glyphicon-download-alt");g[e].setAttribute("aria-hidden","true");c[e].appendChild(g[e])}}for(d=0;d<types.audio.length;d++){k=new RegExp(types.audio[d]);if(k.test(a[e].href)){if(e===0){verContenido(a[e].href,true)}c[e]=document.createElement("button");c[e].setAttribute("onclick",'window.location.href="'+a[e].href+'"');c[e].setAttribute("class","btn btn-default btn-xs");g[e]=document.createElement("span");g[e].setAttribute("class","glyphicon glyphicon-download-alt");g[e].setAttribute("aria-hidden","true");c[e].appendChild(g[e])}}for(d=0;d<types.image.length;d++){k=new RegExp(types.image[d]);if(k.test(a[e].href)){if(e===0){verContenido(a[e].href,true)}c[e]=document.createElement("button");c[e].setAttribute("onclick",'window.location.href="'+a[e].href+'"');c[e].setAttribute("class","btn btn-default btn-xs");g[e]=document.createElement("span");g[e].setAttribute("class","glyphicon glyphicon-download-alt");g[e].setAttribute("aria-hidden","true");c[e].appendChild(g[e])}}}for(e=0;e<a.length;e++){for(d=0;d<types.doc.length;d++){k=new RegExp(types.doc[d]);if(k.test(a[e].href)){f[e].appendChild(c[e]);a[e].setAttribute("onclick","verContenido('"+a[e].href+"',true);");a[e].removeAttribute("href");a[e].setAttribute("style","cursor:pointer")}}for(d=0;d<types.video.length;d++){k=new RegExp(types.video[d]);if(k.test(a[e].href)){f[e].appendChild(c[e]);a[e].setAttribute("onclick","verContenido('"+a[e].href+"',true);");a[e].removeAttribute("href");a[e].setAttribute("style","cursor:pointer")}}for(d=0;d<types.audio.length;d++){k=new RegExp(types.audio[d]);if(k.test(a[e].href)){f[e].appendChild(c[e]);a[e].setAttribute("onclick","verContenido('"+a[e].href+"',true);");a[e].removeAttribute("href");a[e].setAttribute("style","cursor:pointer")}}for(d=0;d<types.image.length;d++){k=new RegExp(types.image[d]);if(k.test(a[e].href)){f[e].appendChild(c[e]);a[e].setAttribute("onclick","verContenido('"+a[e].href+"',true);");a[e].removeAttribute("href");a[e].setAttribute("style","cursor:pointer")}}}}}function verContenido(b,c){var a="";if(c&&/.pdf/.test(b)){a+='<div><a id="fullScreen" onclick="maximizar(\''+b+'\');" class="btn btn-default" role="button" style="margin:0 10px 10px 0;float:right;">Ver a pantalla completa</a></div>'}else{if(!c){a+='<div><a onclick="window.close();" class="boton">Cerrar ventana</a></div>'}}if(/.mp4/.test(b)||/.flv/.test(b)||/.webm/.test(b)||/.ogg/.test(b)){a+='<video width="100%" controls>\n';a+='\t<source src="'+b;if(/.mp4/.test(b)){a+='" type="video/mp4">\n'}else{if(/.webm/.test(b)){a+='" type="video/webm">\n'}else{if(/.ogg/.test(b)){a+='" type="video/ogg">\n'}else{if(/.flv/.test(b)){a='<object data="'+location.protocol+"//"+location.hostname+"/preview/index.php?item="+b+'" style="width:100%;min-height:400px;">';document.getElementById("preview").innerHTML=a;return}}}}a+="\tYour browser does not support the video tag.\n";a+="\tSu navegador no soporta la etiqueta de video.\n";a+="</video>"}else{if(/.mp3/.test(b)||/.wav/.test(b)){a+='<audio controls style="display:block;width:80%;margin:5em auto 0 auto;">\n';a+='\t<source src="'+b;if(/.mp3/.test(b)){a+='" type="audio/mpeg">\n'}else{if(/.wav/.test(b)){a+='" type="audio/wav">\n'}}a+="\tYour browser does not support the audio tag.\n";a+="\tSu navegador no soporta la etiqueta de audio.\n";a+="</audio>"}else{if(/.pdf/.test(b)){a+='<embed style="border: none; min-height: 600px; height: 100%; min-width: 200px; width: 100%;" ';a+='src="'+location.protocol+"//"+location.hostname+"/preview/visorPDF.php?file="+b+'"/>'}else{if(/.jpeg/.test(b)||/.jpg/.test(b)||/.gif/.test(b)||/.png/.test(b)||/.svg/.test(b)||/.bmp/.test(b)){a='<img src="'+b+'" width="100%" />'}}}}document.getElementById("preview").innerHTML=a}function maximizar(a){var e=["height="+screen.height,"width="+screen.width,"fullscreen=yes"].join(",");var b=location.protocol+"//"+location.host+window.DSpace.theme_path+"scripts/visor.js";var d=window.open("","_blank",e);var c="<!DOCTYPE html>";c+="<html><head>";c+='<script src="'+b+'" charset="utf-8"><\/script>';c+='<style media="screen">';c+=".boton{display:inline-block;text-align:center;cursor:pointer;padding:6px 12px;";c+="font-size:14px;border-radius:4px;border:1px solid #ccc;background-color:#fff;";c+="float:right;margin:0 3% 10px 0;display:inline-block;text-align:center;cursor:pointer;";c+="padding:6px 12px;font-size:14px;border-radius:4px;";c+="border:1px solid #ccc;background-color:#fff;float:right;margin:0 3% 10px 0;}";c+="</style>";c+="</head><body>";c+='<div id="preview"></div>';c+="<script>verContenido('"+a+"',false);<\/script>";c+="</body>";d.document.write(c)};
